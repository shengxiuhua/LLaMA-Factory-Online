# 6. 常见陷阱与解决方案

## 6.1 数据相关陷阱

**数据泄露**是最常见也最危险的陷阱。表现为模型在测试集上表现异常好，但在实际应用中效果很差。原因通常是测试集数据出现在了训练集中，或者训练集和测试集来自相同的来源导致分布过于相似。解决方法是严格划分数据集，确保测试集完全独立，最好来自不同的时间段或来源。

**数据偏见**会导致模型在某些情况下表现不佳。例如，如果训练数据主要来自某个特定领域或人群，模型可能在其他领域或人群上表现差。解决方法是确保数据的多样性，有意识地收集不同来源、不同风格的数据。

**标注质量问题**会直接影响模型效果。如果标注不准确或不一致，模型会学到错误的模式。解决方法是建立严格的标注规范，进行标注者培训，使用多人标注和一致性检查，定期抽查标注质量。

## 6.2 训练相关陷阱

**过拟合**是最常见的训练问题。表现为训练loss很低但验证loss很高，模型在训练数据上表现完美但在新数据上表现差。解决方法包括：减少训练轮数、增加数据量、使用数据增强、增大正则化（weight_decay、dropout）、使用早停策略。

**欠拟合**表现为训练loss和验证loss都很高，模型没有充分学习。原因可能是模型容量不足、学习率太小、训练时间不够。解决方法是：增大模型或LoRA的秩、增大学习率、延长训练时间、检查数据质量。

**灾难性遗忘**指模型在学习新任务时忘记了原有能力。解决方法是：使用较小的学习率、在训练数据中混入通用数据、使用参数高效方法（如LoRA）而不是全量微调、考虑使用知识蒸馏。

**训练不稳定**表现为loss剧烈震荡或突然上升。原因可能是学习率太大、批次大小太小、数据有问题。解决方法是：减小学习率、使用梯度裁剪、增大批次大小、检查并清洗数据、使用warmup策略。

## 6.3 评估相关陷阱

**过度依赖自动指标**会导致误判。自动指标（如BLEU、ROUGE）只能反映表面的相似性，不能真正衡量输出质量。解决方法是结合人工评估，特别是在关键决策点。

**验证集过拟合**指在调参过程中过度优化验证集，导致验证集不再能反映真实性能。解决方法是使用独立的测试集进行最终评估，限制在验证集上的调参次数。

**忽视边界情况**会导致模型在特殊情况下失效。解决方法是设计全面的测试用例，包括各种边界情况、异常输入、对抗样本等。

